# 青楓館式英語開発カリキュラム統合

OwlLearnアプリに青楓館式英語開発カリキュラムが正常に統合されました。このドキュメントでは統合の詳細と使用方法について説明します。

## 🎯 統合の目的

### 高レベル目標
- **英語嫌いの克服**: 発音特化アプローチで自信を構築
- **海外大学進学者増加**: 実践的な英語力の向上
- **モチベーション維持**: 即戦力フレーズと実用性重視

### 測定指標（KPI）
- `speakingCount`: 声を出した回数
- `practiceCount`: 使った回数（練習回数）
- `missionCount`: 行動回数（ミッション完了回数）

## 🏗️ アーキテクチャ構成

### データベース拡張

#### 新規テーブル
- **Mission**: ミッションシステム
- **SpeechRecord**: 発音記録
- **CurriculumStage**: フェーズ・ステージ情報

#### User テーブル拡張
```prisma
// 青楓館式カリキュラム進捗指標
speakingCount     Int   @default(0)  // 声を出した回数
practiceCount     Int   @default(0)  // 使った回数（練習回数）
missionCount      Int   @default(0)  // 行動回数（ミッション完了回数）
currentPhase      Int   @default(1)  // 現在のフェーズ
motivationLevel   Int   @default(1)  // モチベーションレベル (1-5)
pronunciationScore Float @default(0.0) // 発音スコア平均
```

### フェーズ構成

#### フェーズ 1: 基礎発音 & 自信構築
- **ステージ 1**: 英語の音を知る
- **ステージ 2**: 日常挨拶マスター

#### フェーズ 2: 実用表現 & コミュニケーション基礎
- **ステージ 1**: お店での注文
- **ステージ 2**: 道案内・場所

#### フェーズ 3: ビジネス基礎 & 自己表現
- **ステージ 1**: 自己紹介・職業
- **ステージ 2**: 電話・メール対応

#### フェーズ 4: アカデミック英語 & プレゼンテーション
- **ステージ 1**: 意見表明・議論
- **ステージ 2**: プレゼンテーション基礎

#### フェーズ 5: 高度なコミュニケーション
- **ステージ 1**: 交渉・説得
- **ステージ 2**: 文化理解・国際感覚

#### フェーズ 6: 実践応用 & 海外進学準備
- **ステージ 1**: アカデミックライティング
- **ステージ 2**: 海外生活準備

## 🚀 実装済み機能

### 1. UIコンポーネント
- `/app/curriculum/page.tsx`: メインダッシュボード
- `/app/curriculum/phase/[phaseId]/page.tsx`: フェーズ詳細
- `/app/curriculum/missions/page.tsx`: ミッション管理

### 2. API エンドポイント
- `/api/curriculum/user-stats`: ユーザー統計の取得・更新
- `/api/speech/analyze-audio`: 音響分析（既存の音波分析システムと統合）

### 3. ナビゲーション統合
- BottomNavに「カリキュラム」タブを追加
- 既存のOwlLearn機能との完全な互換性

### 4. ミッションシステム
カテゴリ別ミッション分類:
- **DAILY_LIFE**: 日常生活
- **WORK_STUDY**: 仕事・勉強
- **SOCIAL**: 社交
- **TRAVEL**: 旅行
- **BUSINESS**: ビジネス
- **CREATIVE**: 創作活動

## 📊 進捗管理システム

### 発音評価
既存のAI音響分析システムと統合:
- ピッチスコア
- 音量スコア
- 安定性スコア
- 総合スコア
- リアルタイムフィードバック

### モチベーション管理
- 5段階のモチベーションレベル
- 実績に基づく自動レベル調整
- ビジュアルフィードバック（星評価）

## 🔧 技術仕様

### 使用技術
- **Frontend**: Next.js 14, React, TypeScript
- **UI**: Tailwind CSS, Radix UI, shadcn/ui
- **Database**: PostgreSQL, Prisma ORM
- **Audio**: Web Audio API, MediaRecorder API
- **AI**: Google Cloud Speech-to-Text, OpenAI GPT-4

### ファイル構成
```
app/
  curriculum/
    page.tsx                    # メインダッシュボード
    phase/[phaseId]/page.tsx   # フェーズ詳細
    missions/page.tsx          # ミッション管理
  api/
    curriculum/
      user-stats/route.ts      # ユーザー統計API

prisma/
  schema.prisma              # データベーススキーマ
  seed-curriculum.ts         # カリキュラムシードデータ

components/
  ui/
    ai-speaking-practice.tsx   # 音響分析統合

components/layout/
  bottom-nav.tsx             # ナビゲーション更新
```

## 📱 使用方法

### 1. カリキュラムアクセス
1. BottomNavの「カリキュラム」タブをタップ
2. 現在のフェーズと進捗を確認
3. 学習を続けるボタンで続行

### 2. フェーズ学習
1. 解放されたフェーズを選択
2. ステージ内のフレーズ練習
3. AI音響分析による評価
4. スコアに基づくXP獲得

### 3. ミッション完了
1. ミッションページでタスク確認
2. カテゴリ・難易度でフィルタリング
3. 実生活での実践後、完了報告
4. 報酬XPとカウンター更新

## 📈 データフロー

### 発音練習セッション
1. フレーズ選択
2. 音声録音（Web Audio API）
3. 音響分析（リアルタイム）
4. AI評価（スコア算出）
5. データベース記録
6. KPI更新（speakingCount, practiceCount）

### ミッション完了
1. ミッション選択
2. 実践活動
3. 完了報告
4. 検証・承認
5. KPI更新（missionCount）
6. XP・モチベーション調整

## 🎨 デザイン原則

### ユーザーエクスペリエンス
- **直感的操作**: 複雑な設定なしで即座に開始
- **視覚的フィードバック**: プログレスバー、スコア表示
- **ゲーミフィケーション**: XP、レベル、達成感

### アクセシビリティ
- **マルチデバイス対応**: モバイルファースト設計
- **オフライン対応**: ローカルストレージ活用
- **多言語サポート**: 日英バイリンガル

## 🔄 既存機能との互換性

### 保持された機能
- 既存のレッスンシステム
- ゲーム要素（XP、ハート、ストリーク）
- ユーザープロフィール
- ソーシャル機能

### 拡張された機能
- 発音特化練習
- 実践ミッションシステム
- より詳細な進捗追跡
- モチベーション管理

## 🚦 今後の拡張予定

### Phase 2 機能
- 音声録音の保存・再生
- ソーシャル機能（発音シェア）
- AI チューター機能
- 詳細な分析レポート

### 統合改善
- より精密な音響分析
- カスタムフレーズ追加
- 学習経路の個人化
- 進捗予測アルゴリズム

## 📞 サポート・問い合わせ

実装についてご質問がある場合は、以下の情報と併せてお問い合わせください：
- 使用環境（デバイス、ブラウザ）
- エラーメッセージ（該当する場合）
- 実行手順

---

**青楓館式英語開発カリキュラム** - 発音特化で英語嫌いを克服し、海外進学への道筋を提供する革新的な学習システム。 